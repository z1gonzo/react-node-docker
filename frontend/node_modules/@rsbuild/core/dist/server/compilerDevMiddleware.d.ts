/// <reference types="node" />
/// <reference types="node" />
import type { IncomingMessage } from 'http';
import type { Socket } from 'net';
import type { DevMiddlewaresConfig, DevMiddlewareAPI, DevMiddleware as CustomDevMiddleware } from '@rsbuild/shared';
type Options = {
    publicPaths: string[];
    dev: DevMiddlewaresConfig;
    devMiddleware: CustomDevMiddleware;
};
/**
 * Setup compiler-related logic:
 * 1. setup webpack-dev-middleware
 * 2. establish webSocket connect
 */
export declare class CompilerDevMiddleware {
    middleware: DevMiddlewareAPI;
    private devOptions;
    private devMiddleware;
    private publicPaths;
    private socketServer;
    constructor({ dev, devMiddleware, publicPaths }: Options);
    init(): void;
    upgrade(req: IncomingMessage, sock: Socket, head: any): void;
    close(): void;
    sockWrite(type: string, data?: Record<string, any> | string | boolean): void;
    private setupDevMiddleware;
}
export {};
