/// <reference types="node" />
/// <reference types="node" />
import type { IncomingMessage } from 'http';
import type { Socket } from 'net';
import ws from '../../compiled/ws';
import { type Stats, type DevMiddlewaresConfig } from '@rsbuild/shared';
export declare class SocketServer {
    private wsServer;
    private readonly sockets;
    private readonly options;
    private stats?;
    private timer;
    constructor(options: DevMiddlewaresConfig);
    upgrade(req: IncomingMessage, sock: Socket, head: any): void;
    prepare(): void;
    updateStats(stats: Stats): void;
    sockWrite(type: string, data?: Record<string, any> | string | boolean): void;
    singleWrite(socket: ws, type: string, data?: Record<string, any> | string | boolean): void;
    close(): void;
    private onConnect;
    private getStats;
    private sendStats;
    private send;
}
